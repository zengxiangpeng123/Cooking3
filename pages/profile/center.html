<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä¸­å¿ƒ - ç‚’èœå­¦ä¹ å¹³å°</title>
    <meta name="description" content="ç®¡ç†æ‚¨çš„ä¸ªäººä¿¡æ¯ã€å­¦ä¹ è¿›åº¦å’Œè´¦æˆ·è®¾ç½®">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../../data/imgs/å›¾æ ‡.iconfont">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="../../css/base/reset.css">
    <link rel="stylesheet" href="../../css/base/variables.css">
    <link rel="stylesheet" href="../../css/base/base.css">
    <link rel="stylesheet" href="../../css/components/header.css">
    <link rel="stylesheet" href="../../css/components/footer.css">
    <link rel="stylesheet" href="../../css/components/card.css">
    <link rel="stylesheet" href="../../css/components/cool-search.css">
    <link rel="stylesheet" href="../../css/components/text-animations.css">
    <link rel="stylesheet" href="../../css/pages/profile.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    
    <style>
        /* ç”¨æˆ·ä¸­å¿ƒä¸“ç”¨æ ·å¼ */
        .user-center {
            min-height: calc(100vh - 160px);
            padding: 40px 0;
            background: #f8f9fa;
        }
        
        /* ä¸»å¸ƒå±€ï¼šå·¦å¯¼èˆª + å³å†…å®¹ */
        .center-layout {
            display: flex;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* å·¦ä¾§å¯¼èˆªæ  */
        .center-nav {
            flex: 0 0 280px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 0;
            height: fit-content;
            position: sticky;
            top: 120px;
        }
        
        /* ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ */
        .user-profile-header {
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            background: linear-gradient(135deg, #ff6b35, #ff8b5a);
            color: white;
            border-radius: 12px 12px 0 0;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            border: 4px solid rgba(255,255,255,0.3);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .profile-avatar:hover {
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.6);
        }
        
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }
        
        /* å¤´åƒä¸Šä¼ è¦†ç›–å±‚ */
        .avatar-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .profile-avatar:hover .avatar-upload-overlay {
            opacity: 1;
        }
        
        .avatar-upload-overlay i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .avatar-upload-overlay span {
            font-size: 0.7rem;
            font-weight: 500;
        }
        
        .profile-name {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .profile-email {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats-mini {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .stat-mini {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }
        
        .stat-mini:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .stat-mini__icon {
            width: 32px;
            height: 32px;
            margin: 0 auto 8px;
        }
        
        .stat-mini__icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .stat-mini__number {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }
        
        .stat-mini__label {
            font-size: 0.8rem;
            color: #666;
            margin-top: 4px;
        }
        
        /* å¯¼èˆªèœå• */
        .nav-menu {
            padding: 0;
        }
        
        .nav-menu__item {
            display: block;
            padding: 18px 20px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .nav-menu__item:hover {
            background: #f8f9fa;
            color: #ff6b35;
            padding-left: 25px;
        }
        
        .nav-menu__item.active {
            background: #ff6b35;
            color: white;
            border-left: 4px solid #e55a2b;
        }
        
        .nav-menu__item:last-child {
            border-bottom: none;
            border-radius: 0 0 12px 12px;
        }
        
        .nav-menu__item i {
            width: 20px;
            margin-right: 12px;
        }
        
        /* å³ä¾§å†…å®¹åŒºåŸŸ */
        .center-content {
            flex: 1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        
        .content-section {
            display: none;
            padding: 30px;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ff6b35;
            display: inline-block;
        }
        
        /* ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼ - å¼ºåˆ¶å››ä¸ªä¸€æ’ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #ff6b35, #ff8b5a);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        /* ç®€æ´çš„å·¦ä¸Šè§’å…‰æ•ˆ */
        .stat-card::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, 
                rgba(255,255,255,0.15) 0%, 
                rgba(255,255,255,0.08) 50%, 
                transparent 100%
            );
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.8;
        }
        
        /* æ‚¬åœæ—¶è½»å¾®ä¸Šæµ®æ•ˆæœ */
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
        }
        
        .stat-card:hover::before {
            opacity: 1;
        }
        
        .stat-card__icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 15px;
        }
        
        .stat-card__icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* ç§»é™¤ç™½è‰²æ»¤é•œï¼Œæ˜¾ç¤ºåŸå§‹å›¾ç‰‡ */
        }
        
        /* è·å¾—æˆå°±å›¾æ ‡ç‰¹æ®Šå¤„ç† - æ”¾å¤§10% */
        .stat-card__icon img[alt="è·å¾—æˆå°±"] {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.3)); /* æ·»åŠ å‘å…‰æ•ˆæœ */
        }
        
        /* å·¦ä¾§å°ç»Ÿè®¡å›¾æ ‡çš„è·å¾—æˆå°±ä¹Ÿè¦æ”¾å¤§ */
        .stat-mini__icon img[alt="è·å¾—æˆå°±"] {
            transform: scale(1.1);
        }
        
        .stat-card__number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-card__label {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* å­¦ä¹ è®°å½•ç½‘æ ¼ */
        .learning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* æœ¬å‘¨å­¦ä¹ ç½‘æ ¼ */
        .weekly-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .day-item {
            text-align: center;
            padding: 20px 10px;
            border-radius: 12px;
            transition: all 0.3s;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }
        
        .day-item.completed {
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            transform: scale(1.02);
        }
        
        .day-item.current {
            background: linear-gradient(135deg, #ff6b35, #ff8b5a);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        }
        
        .day-item.missed {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }
        
        .day-item.future {
            background: #f8f9fa;
            color: #999;
            border: 2px dashed #ddd;
        }
        
        .day-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .day-status {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .day-date {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        /* æ•°æ®ç®¡ç†å¡ç‰‡ - å¼ºåˆ¶å››ä¸ªä¸€æ’ */
        .data-management {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .data-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .data-card__icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }
        
        .data-card__title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .data-card__desc {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .data-card__actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .data-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .data-btn--primary {
            background: #ff6b35;
            color: white;
        }
        
        .data-btn--primary:hover {
            background: #e55a2b;
        }
        
        .data-btn--secondary {
            background: #6c757d;
            color: white;
        }
        
        .data-btn--secondary:hover {
            background: #545b62;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 992px) {
            .center-layout {
                flex-direction: column;
            }
            
            .center-nav {
                flex: none;
                position: static;
            }
            
            .stats-mini {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .nav-menu__item {
                display: inline-block;
                padding: 15px 20px;
                border-bottom: none;
                border-right: 1px solid #f0f0f0;
                border-radius: 0;
            }
            
            .nav-menu {
                display: flex;
                overflow-x: auto;
                white-space: nowrap;
            }
            
            .nav-menu__item:last-child {
                border-right: none;
                border-radius: 0;
            }
        }
        
        @media (max-width: 768px) {
            .center-layout {
                padding: 0 15px;
            }
            
            .stats-mini {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* æ‰‹æœºç«¯ç»Ÿè®¡å¡ç‰‡æ”¹ä¸º2x2å¸ƒå±€ */
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .stat-card {
                padding: 18px;
            }
            
            .stat-card__number {
                font-size: 1.6rem;
            }
            
            .stat-card__label {
                font-size: 0.9rem;
            }
            
            /* æ‰‹æœºç«¯å·¦ä¸Šè§’å…‰æ•ˆè°ƒå° */
            .stat-card::before {
                width: 40px;
                height: 40px;
                top: 10px;
                left: 10px;
            }
            
            /* æ‰‹æœºç«¯å¿«é€Ÿæ“ä½œæ”¹ä¸º2x2å¸ƒå±€ */
            .data-management {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .learning-grid {
                grid-template-columns: 1fr;
            }
            
            .weekly-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 8px;
            }
            
            .day-item {
                padding: 15px 5px;
                min-height: 90px;
            }
            
            .day-status {
                font-size: 1.5rem;
            }
        }
        
        /* å¹³æ¿ç«¯é€‚é… */
        @media (max-width: 992px) and (min-width: 769px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }
            
            .data-management {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- é¡µé¢å¤´éƒ¨ -->
    <header class="header">
        <div class="container">
            <div class="header__content">
                <div class="header__logo">
                    <a href="../../main.html" class="logo">
                        <img src="../../data/imgs/å›¾æ ‡.png" alt="ç‚’èœå­¦ä¹ å¹³å°" class="logo__icon">
                        <span class="logo__text">ç‚’èœå­¦ä¹ å¹³å°</span>
                    </a>
                </div>
                
                <nav class="header__nav">
                    <ul class="nav__list">
                        <li class="nav__item">
                            <a href="../../main.html" class="nav__link">é¦–é¡µ</a>
                        </li>
                        <li class="nav__item">
                            <a href="../recipes/list.html" class="nav__link">èœè°±å¤§å…¨</a>
                        </li>
                        <li class="nav__item">
                            <a href="../guide/basics.html" class="nav__link">çƒ¹é¥ªæŒ‡å—</a>
                        </li>
                        <li class="nav__item">
                            <a href="../forum/index.html" class="nav__link">ç¾é£Ÿè®ºå›</a>
                        </li>
                        <li class="nav__item">
                            <a href="favorites.html" class="nav__link">æˆ‘çš„æ”¶è—</a>
                        </li>
                        <li class="nav__item">
                            <a href="center.html" class="nav__link nav__link--active">ç”¨æˆ·ä¸­å¿ƒ</a>
                        </li>
                    </ul>
                </nav>
                
                <div class="header__search">
                    <form class="search__form" id="searchForm">
                        <input type="text" class="search__input" placeholder="æœç´¢èœè°±æˆ–é£Ÿæ..." id="searchInput">
                        <button type="submit" class="search__btn">
                            <span class="search__icon">ğŸ”</span>
                        </button>
                    </form>
                </div>
                
                <button class="header__menu-btn" id="mobileMenuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- ç”¨æˆ·ä¸­å¿ƒä¸»è¦å†…å®¹ -->
    <main class="user-center">
        <div class="center-layout">
            <!-- å·¦ä¾§å¯¼èˆªæ  -->
            <aside class="center-nav">
                <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
                <div class="user-profile-header">
                    <div class="profile-avatar" id="avatarContainer" title="ç‚¹å‡»æ›´æ¢å¤´åƒ">
                        <img src="../../assets/images/avatars/default.png" alt="ç”¨æˆ·å¤´åƒ" id="profileAvatar" 
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iNDAiIGZpbGw9IiNmZjZiMzUiLz4KPHN2ZyB4PSIyMCIgeT0iMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0id2hpdGUiPgo8c3ZnIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTIwIDIwQzI0IDIwIDI4IDE2IDI4IDE2QzI4IDEyIDI0IDggMjAgOEMxNiA4IDEyIDEyIDEyIDE2QzEyIDE2IDE2IDIwIDIwIDIwWiIgZmlsbD0iY3VycmVudENvbG9yIi8+CjxwYXRoIGQ9Ik0yMCAyNEMxNiAyNCA4IDI4IDggMzZDOCAzNiAxMiA0MCAyMCA0MEMyOCA0MCAzMiAzNiAzMiAzNkMzMiAyOCAyNCAyNCAyMCAyNFoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgo8L3N2Zz4KPC9zdmc+Cjwvc3ZnPgo=';">
                        <!-- å¤´åƒä¸Šä¼ æŒ‰é’®è¦†ç›–å±‚ -->
                        <div class="avatar-upload-overlay">
                                    <i class="fas fa-camera"></i>
                            <span>æ›´æ¢å¤´åƒ</span>
                        </div>
                    </div>
                                <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    <div class="profile-name" id="profileName">ç”¨æˆ·å</div>
                    <div class="profile-email" id="profileEmail">email@example.com</div>
                            </div>
                
                <!-- å¿«é€Ÿç»Ÿè®¡ -->
                <div class="stats-mini">
                    <div class="stat-mini">
                        <div class="stat-mini__icon">
                            <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/å·²å­¦èœè°±.png" alt="å·²å­¦èœè°±" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ“š';">
                        </div>
                        <div class="stat-mini__number" id="learnedRecipesCount">0</div>
                        <div class="stat-mini__label">å·²å­¦èœè°±</div>
                    </div>
                    <div class="stat-mini">
                        <div class="stat-mini__icon">
                            <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/æ”¶è—èœè°±.png" alt="æ”¶è—èœè°±" onerror="this.style.display='none'; this.parentElement.innerHTML='â¤ï¸';">
                        </div>
                        <div class="stat-mini__number" id="favoriteRecipesCount">0</div>
                        <div class="stat-mini__label">æ”¶è—èœè°±</div>
                    </div>
                    <div class="stat-mini">
                        <div class="stat-mini__icon">
                            <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/å­¦ä¹ å¤©æ•°.png" alt="å­¦ä¹ å¤©æ•°" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ“…';">
                        </div>
                        <div class="stat-mini__number" id="studyDaysCount">0</div>
                        <div class="stat-mini__label">å­¦ä¹ å¤©æ•°</div>
                    </div>
                    <div class="stat-mini">
                        <div class="stat-mini__icon">
                            <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/è·å¾—æˆå°±.png" alt="è·å¾—æˆå°±" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ†';">
                        </div>
                        <div class="stat-mini__number" id="achievementsCount">0</div>
                        <div class="stat-mini__label">è·å¾—æˆå°±</div>
                            </div>
                        </div>
                        
                <!-- å¯¼èˆªèœå• -->
                <nav class="nav-menu">
                    <a class="nav-menu__item active" data-section="overview" href="#overview">
                        <i class="fas fa-tachometer-alt"></i>
                        æ•°æ®æ€»è§ˆ
                    </a>
                    <a class="nav-menu__item" data-section="learning" href="#learning">
                        <i class="fas fa-book-open"></i>
                        æœ€è¿‘å­¦ä¹ 
                    </a>
                    <a class="nav-menu__item" data-section="weekly" href="#weekly">
                        <i class="fas fa-calendar-week"></i>
                        æœ¬å‘¨è®¡åˆ’
                    </a>
                    <a class="nav-menu__item" data-section="profile" href="#profile">
                        <i class="fas fa-user-edit"></i>
                        ä¸ªäººä¿¡æ¯
                    </a>
                    <a class="nav-menu__item" data-section="data" href="#data">
                        <i class="fas fa-database"></i>
                        æ•°æ®ç®¡ç†
                    </a>
                    <a class="nav-menu__item" data-section="security" href="#security">
                                <i class="fas fa-shield-alt"></i>
                                è´¦æˆ·å®‰å…¨
                            </a>
                    <a class="nav-menu__item" data-section="help" href="#help">
                                <i class="fas fa-question-circle"></i>
                                å¸®åŠ©ä¸­å¿ƒ
                            </a>
                        </nav>
            </aside>
            
            <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
            <main class="center-content">
                <!-- æ•°æ®æ€»è§ˆ -->
                <section class="content-section active" id="overviewSection">
                    <h2 class="section-title page-title-animated animate-gradient-text">æ•°æ®æ€»è§ˆ</h2>
                    
                    <!-- è¯¦ç»†ç»Ÿè®¡å¡ç‰‡ -->
                    <div class="stats-grid cards-animated">
                        <div class="stat-card">
                            <div class="stat-card__icon">
                                <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/å·²å­¦èœè°±.png" alt="å·²å­¦èœè°±">
                            </div>
                            <div class="stat-card__number" id="totalLearnedRecipes">0</div>
                            <div class="stat-card__label">å·²å­¦èœè°±</div>
                                    </div>
                        <div class="stat-card">
                            <div class="stat-card__icon">
                                <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/æ”¶è—èœè°±.png" alt="æ”¶è—èœè°±">
                                    </div>
                            <div class="stat-card__number" id="totalFavoriteRecipes">0</div>
                            <div class="stat-card__label">æ”¶è—èœè°±</div>
                                    </div>
                        <div class="stat-card">
                            <div class="stat-card__icon">
                                <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/å­¦ä¹ å¤©æ•°.png" alt="å­¦ä¹ å¤©æ•°">
                                    </div>
                            <div class="stat-card__number" id="totalStudyDays">0</div>
                            <div class="stat-card__label">å­¦ä¹ å¤©æ•°</div>
                                    </div>
                        <div class="stat-card">
                            <div class="stat-card__icon">
                                <img src="../../data/imgs/ç”¨æˆ·ä¸­å¿ƒ/è·å¾—æˆå°±.png" alt="è·å¾—æˆå°±">
                                    </div>
                            <div class="stat-card__number" id="totalAchievements">0</div>
                            <div class="stat-card__label">è·å¾—æˆå°±</div>
                                </div>
                            </div>
                            
                    <!-- å¿«é€Ÿæ“ä½œ -->
                    <h3 style="margin: 40px 0 20px 0; font-size: 1.4rem; color: #333;">å¿«é€Ÿæ“ä½œ</h3>
                    <div class="data-management">
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ”</div>
                            <h4 class="data-card__title">æµè§ˆèœè°±</h4>
                            <p class="data-card__desc">å‘ç°æ›´å¤šç¾å‘³èœè°±</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="window.location.href='../recipes/list.html'">
                                    ç«‹å³æµè§ˆ
                                </button>
                                        </div>
                                        </div>
                        <div class="data-card">
                            <div class="data-card__icon">â¤ï¸</div>
                            <h4 class="data-card__title">æˆ‘çš„æ”¶è—</h4>
                            <p class="data-card__desc">æŸ¥çœ‹æ”¶è—çš„èœè°±</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="window.location.href='favorites.html'">
                                    æŸ¥çœ‹æ”¶è—
                                </button>
                                        </div>
                                        </div>
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ’¬</div>
                            <h4 class="data-card__title">ç¾é£Ÿè®ºå›</h4>
                            <p class="data-card__desc">ä¸å¨å‹äº¤æµå¿ƒå¾—</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="window.location.href='../forum/index.html'">
                                    è¿›å…¥è®ºå›
                                        </button>
                                    </div>
                            </div>
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ“–</div>
                            <h4 class="data-card__title">çƒ¹é¥ªæŒ‡å—</h4>
                            <p class="data-card__desc">å­¦ä¹ çƒ¹é¥ªæŠ€å·§</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="window.location.href='../guide/basics.html'">
                                    å­¦ä¹ æŠ€å·§
                                </button>
                        </div>
                                    </div>
                                        </div>
                </section>
                
                <!-- æœ€è¿‘å­¦ä¹  -->
                <section class="content-section" id="learningSection">
                    <h2 class="section-title">æœ€è¿‘å­¦ä¹ </h2>
                    
                    <div class="section-actions" style="margin-bottom: 20px; text-align: right;">
                        <button class="data-btn data-btn--secondary" onclick="openFullLearningHistory()">
                            <i class="fas fa-history"></i>
                            æŸ¥çœ‹å…¨éƒ¨è®°å½•
                                        </button>
                        <button class="data-btn data-btn--secondary" onclick="clearLearningHistory()" style="margin-left: 10px;">
                            <i class="fas fa-trash"></i>
                            æ¸…ç©ºè®°å½•
                                        </button>
                                </div>
                                
                    <div class="learning-grid" id="learningGrid">
                        <!-- æœ€è¿‘å­¦ä¹ è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                    
                    <div class="empty-state" id="learningEmpty" style="display: none; text-align: center; padding: 60px 20px; color: #666;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“š</div>
                        <h3>è¿˜æ²¡æœ‰å­¦ä¹ è®°å½•</h3>
                        <p>æµè§ˆèœè°±è¯¦æƒ…é¡µé¢å³ä¼šè‡ªåŠ¨è®°å½•å­¦ä¹ å†å²</p>
                        <button class="data-btn data-btn--primary" onclick="window.location.href='../recipes/list.html'" style="margin-top: 15px;">
                            å¼€å§‹å­¦ä¹ èœè°±
                                        </button>
                                    </div>
                </section>
                
                <!-- æœ¬å‘¨è®¡åˆ’ -->
                <section class="content-section" id="weeklySection">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <h2 class="section-title" style="margin-bottom: 0;">æœ¬å‘¨å­¦ä¹ è®¡åˆ’ <span id="currentWeekRange" style="font-size: 1rem; color: #666; font-weight: normal;"></span></h2>
                        <div class="plan-actions">
                            <button class="data-btn data-btn--secondary" onclick="editWeeklyPlan()" style="margin-right: 10px;">
                                <i class="fas fa-edit"></i>
                                ç¼–è¾‘è®¡åˆ’
                            </button>
                            <button class="data-btn data-btn--primary" onclick="setWeeklyGoal()">
                                <i class="fas fa-target"></i>
                                è®¾å®šç›®æ ‡
                            </button>
                        </div>
                    </div>
                    
                    <!-- å½“å‰ç›®æ ‡æ˜¾ç¤º -->
                    <div class="current-goal" id="currentGoal" style="
                        background: linear-gradient(135deg, #e8f5e9, #f1f8e9);
                        border: 1px solid #4caf50;
                        border-radius: 8px;
                        padding: 20px;
                        margin-bottom: 30px;
                        display: none;
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4 style="margin: 0 0 8px 0; color: #2e7d32; font-size: 1.1rem;">ğŸ“‹ æœ¬å‘¨ç›®æ ‡</h4>
                                <p id="goalDescription" style="margin: 0; color: #388e3c; font-size: 0.95rem;"></p>
                            </div>
                            <div class="goal-progress" style="text-align: center;">
                                <div id="goalProgress" style="font-size: 1.2rem; font-weight: 600; color: #2e7d32;"></div>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">å®Œæˆè¿›åº¦</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="weekly-grid" id="weeklyGrid">
                        <!-- æœ¬å‘¨å­¦ä¹ çŠ¶æ€å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <div class="weekly-summary" style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; margin-top: 30px;">
                        <div style="display: flex; justify-content: space-around; align-items: center;">
                            <div>
                                <strong id="completedDaysCount" style="font-size: 1.5rem; color: #4caf50;">0</strong>
                                <div style="color: #666; font-size: 0.9rem;">å¤©å·²å­¦ä¹ </div>
                            </div>
                            <div style="height: 40px; width: 1px; background: #ddd;"></div>
                            <div>
                                <strong id="remainingDaysCount" style="font-size: 1.5rem; color: #ff6b35;">7</strong>
                                <div style="color: #666; font-size: 0.9rem;">å¤©å¾…å­¦ä¹ </div>
                            </div>
                            <div style="height: 40px; width: 1px; background: #ddd;"></div>
                            <div>
                                <strong id="weeklyGoalProgress" style="font-size: 1.5rem; color: #2196f3;">0%</strong>
                                <div style="color: #666; font-size: 0.9rem;">ç›®æ ‡å®Œæˆ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è®¡åˆ’å»ºè®® -->
                    <div class="plan-suggestions" id="planSuggestions" style="margin-top: 30px;">
                        <!-- è®¡åˆ’å»ºè®®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>
                
                <!-- ä¸ªäººä¿¡æ¯ -->
                <section class="content-section" id="profileSection">
                    <h2 class="section-title">ä¸ªäººä¿¡æ¯</h2>
                    
                    <div class="profile-info-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                            <h4 style="margin: 0 0 15px 0; color: #333;">åŸºæœ¬ä¿¡æ¯</h4>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">ç”¨æˆ·å</label>
                                <span id="displayUsername">ç”¨æˆ·å</span>
                                    </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">é‚®ç®±åœ°å€</label>
                                <span id="displayEmail">email@example.com</span>
                                </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">æ³¨å†Œæ—¶é—´</label>
                                <span>2024å¹´10æœˆ</span>
                                    </div>
                                </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                            <h4 style="margin: 0 0 15px 0; color: #333;">æ‰©å±•ä¿¡æ¯</h4>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">æ‰‹æœºå·ç </label>
                                <span id="displayPhone">æœªç»‘å®š</span>
                                    </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">çœŸå®å§“å</label>
                                <span id="displayRealName">æœªè®¾ç½®</span>
                            </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">æ‰€åœ¨åœ°åŒº</label>
                                <span id="displayLocation">æœªè®¾ç½®</span>
                            </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">ä¸ªäººç®€ä»‹</label>
                                <span id="displayBio">çƒ­çˆ±ç¾é£Ÿçš„çƒ¹é¥ªçˆ±å¥½è€…</span>
                            </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">å…´è¶£æ ‡ç­¾</label>
                                <span id="displayInterests">æœªè®¾ç½®</span>
                            </div>
                            <div class="info-item" style="margin: 12px 0;">
                                <label style="display: block; font-weight: 600; color: #666; margin-bottom: 4px;">æœ€åæ´»è·ƒ</label>
                                <span>ä»Šå¤©</span>
                            </div>
                        </div>
                                        </div>
                    
                    <div style="margin-top: 30px;">
                        <button class="data-btn data-btn--primary" onclick="window.location.href='edit.html'">
                            <i class="fas fa-edit"></i>
                            ç¼–è¾‘èµ„æ–™
                        </button>
                        <button class="data-btn data-btn--secondary" onclick="refreshProfile()" style="margin-left: 10px;">
                            <i class="fas fa-sync-alt"></i>
                            åˆ·æ–°ä¿¡æ¯
                        </button>
                    </div>
                </section>
                
                <!-- æ•°æ®ç®¡ç† -->
                <section class="content-section" id="dataSection">
                    <h2 class="section-title">æ•°æ®ç®¡ç†</h2>
                    
                    <div class="data-management">
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ’¾</div>
                            <h4 class="data-card__title">æ”¶è—ç®¡ç†</h4>
                            <p class="data-card__desc">å¯¼å…¥å¯¼å‡ºæ‚¨çš„æ”¶è—æ•°æ®</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="exportFavorites()">
                                            <i class="fas fa-download"></i>
                                            å¯¼å‡ºæ”¶è—
                                        </button>
                                <button class="data-btn data-btn--secondary" onclick="importFavorites()">
                                    <i class="fas fa-upload"></i>
                                    å¯¼å…¥æ”¶è—
                                        </button>
                                    </div>
                            <input type="file" id="favoritesFileInput" accept=".json" style="display: none;">
                                </div>
                                
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ”„</div>
                            <h4 class="data-card__title">æ•°æ®å¤‡ä»½</h4>
                            <p class="data-card__desc">å¤‡ä»½æ¢å¤æ‰€æœ‰ç”¨æˆ·æ•°æ®</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="backupAllData()">
                                    <i class="fas fa-download"></i>
                                        å¤‡ä»½æ•°æ®
                                    </button>
                                <button class="data-btn data-btn--secondary" onclick="importAllData()">
                                    <i class="fas fa-upload"></i>
                                    æ¢å¤æ•°æ®
                                    </button>
                                </div>
                            <input type="file" id="backupFileInput" accept=".json" style="display: none;">
                                </div>
                                
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ§¹</div>
                            <h4 class="data-card__title">æ•°æ®æ¸…ç†</h4>
                            <p class="data-card__desc">æ¸…ç†å’Œé‡ç½®ç”¨æˆ·æ•°æ®</p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--secondary" onclick="clearLearningHistory()">
                                    æ¸…ç©ºå­¦ä¹ è®°å½•
                                </button>
                                <button class="data-btn data-btn--secondary" onclick="clearAllData()" style="margin-top: 8px;">
                                    é‡ç½®æ‰€æœ‰æ•°æ®
                                    </button>
                                </div>
                            </div>
                        </div>
                </section>
                
                <!-- è´¦æˆ·å®‰å…¨ -->
                <section class="content-section" id="securitySection">
                    <h2 class="section-title">è´¦æˆ·å®‰å…¨</h2>
                    
                    <div class="data-management">
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ”’</div>
                            <h4 class="data-card__title">å¯†ç ç®¡ç†</h4>
                            <p class="data-card__desc">ä¿®æ”¹ç™»å½•å¯†ç </p>
                            <div class="data-card__actions">
                                <button class="data-btn data-btn--primary" onclick="changePassword()">
                                    <i class="fas fa-key"></i>
                                    ä¿®æ”¹å¯†ç 
                                </button>
                                    </div>
                                </div>
                                
                        <div class="data-card">
                            <div class="data-card__icon">ğŸ“±</div>
                            <h4 class="data-card__title">äºŒæ­¥éªŒè¯</h4>
                            <p class="data-card__desc">å¢å¼ºè´¦æˆ·å®‰å…¨æ€§</p>
                            <div class="data-card__actions">
                                <label style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <input type="checkbox" id="twoFactorToggle">
                                    <span>å¯ç”¨äºŒæ­¥éªŒè¯</span>
                                    </label>
                                </div>
                                    </div>
                                </div>
                </section>
                
                <!-- å¸®åŠ©ä¸­å¿ƒ -->
                <section class="content-section" id="helpSection">
                    <h2 class="section-title">å¸®åŠ©ä¸­å¿ƒ</h2>
                    
                    <div class="data-management">
                        <div class="data-card">
                            <div class="data-card__icon">â“</div>
                            <h4 class="data-card__title">å¸¸è§é—®é¢˜</h4>
                            <p class="data-card__desc">æŸ¥çœ‹å¸¸è§é—®é¢˜è§£ç­”</p>
                            <div style="text-align: left; margin-top: 15px;">
                                <ul style="list-style: none; padding: 0;">
                                    <li style="margin: 8px 0;"><a href="#" style="color: #ff6b35; text-decoration: none;">â€¢ å¦‚ä½•æ”¶è—èœè°±ï¼Ÿ</a></li>
                                    <li style="margin: 8px 0;"><a href="#" style="color: #ff6b35; text-decoration: none;">â€¢ å¦‚ä½•æŸ¥çœ‹å­¦ä¹ è®°å½•ï¼Ÿ</a></li>
                                    <li style="margin: 8px 0;"><a href="#" style="color: #ff6b35; text-decoration: none;">â€¢ å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ</a></li>
                                    <li style="margin: 8px 0;"><a href="#" style="color: #ff6b35; text-decoration: none;">â€¢ å¦‚ä½•åˆ†äº«èœè°±ï¼Ÿ</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="data-card">
                            <div class="data-card__icon">ğŸ“</div>
                            <h4 class="data-card__title">è”ç³»æˆ‘ä»¬</h4>
                            <p class="data-card__desc">è·å¾—æŠ€æœ¯æ”¯æŒ</p>
                            <div style="text-align: left; margin-top: 15px; font-size: 0.9rem; color: #666;">
                                <div style="margin: 8px 0;"><i class="fas fa-envelope" style="color: #ff6b35; margin-right: 8px;"></i>support@cooking-platform.com</div>
                                <div style="margin: 8px 0;"><i class="fas fa-phone" style="color: #ff6b35; margin-right: 8px;"></i>400-123-4567</div>
                                <div style="margin: 8px 0;"><i class="fas fa-clock" style="color: #ff6b35; margin-right: 8px;"></i>å·¥ä½œæ—¶é—´ï¼š9:00-18:00</div>
                            </div>
                                    </div>
                                </div>
                                
                    <!-- æ„è§åé¦ˆ -->
                    <h3 style="margin: 40px 0 20px 0; font-size: 1.4rem; color: #333;">æ„è§åé¦ˆ</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <textarea id="feedbackText" placeholder="è¯·å‘Šè¯‰æˆ‘ä»¬æ‚¨çš„å»ºè®®æˆ–é‡åˆ°çš„é—®é¢˜..." 
                                  style="width: 100%; height: 100px; border: 1px solid #ddd; border-radius: 6px; padding: 12px; resize: vertical;"></textarea>
                        <div style="margin-top: 15px; text-align: right;">
                            <button class="data-btn data-btn--primary" onclick="submitFeedback()">
                                                    <i class="fas fa-paper-plane"></i>
                                                    æäº¤åé¦ˆ
                                                </button>
                </div>
            </div>
        </section>
            </main>
        </div>
    </main>

    <!-- é¡µé¢åº•éƒ¨ -->
    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__section">
                    <h3 class="footer__title">å…³äºæˆ‘ä»¬</h3>
                    <p class="footer__text">ç‚’èœå­¦ä¹ å¹³å°è‡´åŠ›äºä¼ æ’­ä¸­åç¾é£Ÿæ–‡åŒ–ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½è½»æ¾å­¦ä¼šåšèœã€‚</p>
                </div>
                <div class="footer__section">
                    <h3 class="footer__title">å¿«é€Ÿé“¾æ¥</h3>
                    <ul class="footer__links">
                        <li><a href="../recipes/list.html">èœè°±å¤§å…¨</a></li>
                        <li><a href="../guide/basics.html">çƒ¹é¥ªåŸºç¡€</a></li>
                        <li><a href="favorites.html">æˆ‘çš„æ”¶è—</a></li>
                    </ul>
                </div>
                <div class="footer__section">
                    <h3 class="footer__title">è”ç³»æ–¹å¼</h3>
                    <ul class="footer__contact">
                        <li>ğŸ“§ contact@cooking-platform.com</li>
                        <li>ğŸ“± 400-123-4567</li>
                    </ul>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; 2024 ç‚’èœå­¦ä¹ å¹³å°. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript æ–‡ä»¶ -->
    <script src="../../js/utils/global-search.js"></script>
    <script src="../../js/utils/storage.js"></script>
    <script src="../../js/utils/dom.js"></script>
    <script src="../../js/utils/api.js"></script>
    <script src="../../js/data/recipes.js"></script>
    <script src="../../js/data/categories.js"></script>
    <script src="../../js/utils/user-center-manager.js"></script>
    <script src="../../js/utils/data-migration.js"></script>
    <script src="../../js/components/header.js"></script>
    <script src="../../js/components/search.js"></script>

    <script>
        // ç”¨æˆ·ä¸­å¿ƒé¡µé¢ç®¡ç†
        class UserCenterPage {
            constructor() {
                this.currentSection = 'overview';
                this.init();
            }

            init() {
                console.log('ğŸš€ ç”¨æˆ·ä¸­å¿ƒé¡µé¢åˆå§‹åŒ–...');
                this.bindNavigation();
                this.loadUserInfo();
                this.updateAllStats();
                this.setupFileInputs();
                this.setupAvatarUpload();
                
                // ç­‰å¾…ç”¨æˆ·ä¸­å¿ƒç®¡ç†ç³»ç»ŸåŠ è½½å®Œæˆ
                this.waitForManager(() => {
                    this.renderContent();
                });
            }

            waitForManager(callback, attempts = 0) {
                if (window.userCenterManager || attempts > 20) {
                    callback();
                } else {
                    setTimeout(() => {
                        this.waitForManager(callback, attempts + 1);
                    }, 100);
                }
            }

            bindNavigation() {
                const navItems = document.querySelectorAll('.nav-menu__item');
                
                navItems.forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        const section = item.getAttribute('data-section');
                        if (section) {
                            this.showSection(section);
                            
                            // æ›´æ–°å¯¼èˆªçŠ¶æ€
                            navItems.forEach(nav => nav.classList.remove('active'));
                            item.classList.add('active');
                        }
                    });
                });
            }

            showSection(sectionName) {
                // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
                const sections = document.querySelectorAll('.content-section');
                sections.forEach(section => section.classList.remove('active'));
                
                // æ˜¾ç¤ºç›®æ ‡åŒºåŸŸ
                const targetSection = document.getElementById(sectionName + 'Section');
                if (targetSection) {
                    targetSection.classList.add('active');
                    this.currentSection = sectionName;
                    console.log('åˆ‡æ¢åˆ°:', sectionName);
                    
                    // æ ¹æ®åŒºåŸŸæ¸²æŸ“ç›¸åº”å†…å®¹
                    this.renderSectionContent(sectionName);
                }
            }

            renderSectionContent(sectionName) {
                switch (sectionName) {
                    case 'learning':
                        this.renderLearningHistory();
                        break;
                    case 'weekly':
                        this.renderWeeklyPlan();
                        break;
                    case 'overview':
                        this.updateAllStats();
                        break;
                }
            }

            renderLearningHistory() {
                if (window.userCenterManager) {
                    window.userCenterManager.renderRecentLearning();
                }
            }

            renderWeeklyPlan() {
                if (window.userCenterManager) {
                    window.userCenterManager.renderWeeklyLearning();
                }
                
                // æ›´æ–°æœ¬å‘¨ç›®æ ‡å’Œè®¡åˆ’å»ºè®®
                setTimeout(() => {
                    updateWeeklyGoalDisplay();
                    updatePlanSuggestions();
                }, 100);
            }

            loadUserInfo() {
                const username = localStorage.getItem('username') || 'ç”¨æˆ·å';
                const email = localStorage.getItem('email') || 'email@example.com';
                const phone = localStorage.getItem('phone') || 'æœªç»‘å®š';
                const bio = localStorage.getItem('bio') || 'çƒ­çˆ±ç¾é£Ÿçš„çƒ¹é¥ªçˆ±å¥½è€…';
                const realName = localStorage.getItem('realName') || '';
                const location = localStorage.getItem('location') || '';
                const savedAvatar = localStorage.getItem('userAvatar') || '';
                
                // æ›´æ–°æ˜¾ç¤º
                document.getElementById('profileName').textContent = username;
                document.getElementById('profileEmail').textContent = email;
                document.getElementById('displayUsername').textContent = username;
                document.getElementById('displayEmail').textContent = email;
                document.getElementById('displayPhone').textContent = phone || 'æœªç»‘å®š';
                document.getElementById('displayBio').textContent = bio;
                
                // æ›´æ–°å¤´åƒ
                if (savedAvatar) {
                    const avatarImg = document.getElementById('profileAvatar');
                    if (avatarImg) {
                        avatarImg.src = savedAvatar;
                    }
                }
                
                // æ›´æ–°é¢å¤–ä¿¡æ¯æ˜¾ç¤ºï¼ˆå¦‚æœå­˜åœ¨å¯¹åº”å…ƒç´ ï¼‰
                const displayRealName = document.getElementById('displayRealName');
                if (displayRealName) {
                    displayRealName.textContent = realName || 'æœªè®¾ç½®';
                }
                
                const displayLocation = document.getElementById('displayLocation');
                if (displayLocation) {
                    displayLocation.textContent = location || 'æœªè®¾ç½®';
                }
                
                const displayInterests = document.getElementById('displayInterests');
                if (displayInterests) {
                    const interests = localStorage.getItem('interests') || '';
                    displayInterests.textContent = interests || 'æœªè®¾ç½®';
                }
                
                console.log('âœ… ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°', { username, email, phone, bio });
            }

            updateAllStats() {
                if (window.userCenterManager) {
                    const stats = window.userCenterManager.getStats();
                    
                    // æ›´æ–°å·¦ä¾§å°ç»Ÿè®¡
                    document.getElementById('learnedRecipesCount').textContent = stats.learnedRecipes;
                    document.getElementById('favoriteRecipesCount').textContent = stats.favoriteCount;
                    document.getElementById('studyDaysCount').textContent = stats.studyDays;
                    document.getElementById('achievementsCount').textContent = stats.achievements;
                    
                    // æ›´æ–°æ€»è§ˆé¡µé¢å¤§ç»Ÿè®¡
                    document.getElementById('totalLearnedRecipes').textContent = stats.learnedRecipes;
                    document.getElementById('totalFavoriteRecipes').textContent = stats.favoriteCount;
                    document.getElementById('totalStudyDays').textContent = stats.studyDays;
                    document.getElementById('totalAchievements').textContent = stats.achievements;
                        } else {
                    console.log('ç”¨æˆ·ä¸­å¿ƒç®¡ç†ç³»ç»ŸæœªåŠ è½½ï¼Œä½¿ç”¨åŸºç¡€ç»Ÿè®¡');
                    // ä½¿ç”¨ç»Ÿä¸€çš„UserPreferencesç³»ç»Ÿè·å–æ”¶è—æ•°æ®
                    let favoriteCount = 0;
                    if (window.UserPreferences) {
                        favoriteCount = window.UserPreferences.getFavorites().length;
                    } else {
                        // é™çº§åˆ°æ—§ç³»ç»Ÿ
                        const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                        favoriteCount = favorites.length;
                    }
                    document.getElementById('favoriteRecipesCount').textContent = favoriteCount;
                    document.getElementById('totalFavoriteRecipes').textContent = favoriteCount;
                }
            }

            renderContent() {
                this.renderLearningHistory();
                this.renderWeeklyPlan();
            }

            setupFileInputs() {
                // æ”¶è—æ–‡ä»¶å¯¼å…¥
                const favoritesInput = document.getElementById('favoritesFileInput');
                if (favoritesInput) {
                    favoritesInput.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file && window.userCenterManager) {
                            window.userCenterManager.handleFileImport(file, 'favorites');
                        }
                    });
                }
                
                // å¤‡ä»½æ–‡ä»¶å¯¼å…¥
                const backupInput = document.getElementById('backupFileInput');
                if (backupInput) {
                    backupInput.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file && window.userCenterManager) {
                            window.userCenterManager.handleFileImport(file, 'backup');
                        }
                    });
                }
            }

            setupAvatarUpload() {
                const avatarContainer = document.getElementById('avatarContainer');
                const avatarInput = document.getElementById('avatarInput');
                const avatarImg = document.getElementById('profileAvatar');
                
                if (avatarContainer && avatarInput && avatarImg) {
                    // ç‚¹å‡»å¤´åƒè§¦å‘æ–‡ä»¶é€‰æ‹©
                    avatarContainer.addEventListener('click', () => {
                        avatarInput.click();
                    });
                    
                    // å¤„ç†æ–‡ä»¶é€‰æ‹©
                    avatarInput.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file && file.type.startsWith('image/')) {
                            this.handleAvatarUpload(file, avatarImg);
                        }
                    });
                    
                    // åŠ è½½å·²ä¿å­˜çš„å¤´åƒ
                    this.loadSavedAvatar(avatarImg);
                }
            }

            handleAvatarUpload(file, avatarImg) {
                // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶ä¸º2MBï¼‰
                if (file.size > 2 * 1024 * 1024) {
                    showToast('å¤´åƒæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡2MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    const newAvatar = e.target.result;
                    
                    // æ›´æ–°å¤´åƒæ˜¾ç¤º
                    avatarImg.src = newAvatar;
                    
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    localStorage.setItem('userAvatar', newAvatar);
                    
                    // é€šçŸ¥å…¶ä»–é¡µé¢æ›´æ–°å¤´åƒ
                    const avatarEvent = new CustomEvent('avatarChanged', {
                        detail: { avatar: newAvatar }
                    });
                    window.dispatchEvent(avatarEvent);
                    
                    showToast('å¤´åƒæ›´æ–°æˆåŠŸï¼', 'success');
                    console.log('âœ… å¤´åƒå·²æ›´æ–°');
                };
                
                reader.onerror = () => {
                    showToast('å¤´åƒä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                };
                
                reader.readAsDataURL(file);
            }

            loadSavedAvatar(avatarImg) {
                const savedAvatar = localStorage.getItem('userAvatar');
                if (savedAvatar && avatarImg) {
                    avatarImg.src = savedAvatar;
                    console.log('âœ… å·²åŠ è½½ä¿å­˜çš„å¤´åƒ');
                }
            }
        }

        // å…¨å±€å‡½æ•° - ä½¿ç”¨ç»Ÿä¸€çš„UserPreferencesç³»ç»Ÿ
        function exportFavorites() {
            if (!window.UserPreferences) {
                showToast('æ”¶è—ç³»ç»ŸæœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
                return;
            }
            
            const favorites = window.UserPreferences.getFavorites();
            const dataStr = JSON.stringify(favorites, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `æˆ‘çš„æ”¶è—_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('æ”¶è—æ•°æ®å·²å¯¼å‡º', 'success');
        }

        function importFavorites() {
            document.getElementById('favoritesFileInput').click();
        }
        
        function backupAllData() {
            if (!window.UserPreferences) {
                showToast('ç”¨æˆ·ç³»ç»ŸæœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
                return;
            }
            
            // ä½¿ç”¨ç»Ÿä¸€çš„ç³»ç»Ÿå¯¼å‡ºæ•°æ®
            const allData = {
                username: localStorage.getItem('username'),
                email: localStorage.getItem('email'),
                phone: localStorage.getItem('phone'),
                bio: localStorage.getItem('bio'),
                favorites: window.UserPreferences.getFavorites(), // ä½¿ç”¨UserPreferences
                learning_history: JSON.parse(localStorage.getItem('learning_history') || '[]'),
                userAvatar: localStorage.getItem('userAvatar'),
                searchHistory: window.UserPreferences.getSearchHistory(),
                backupDate: new Date().toISOString(),
                dataVersion: '2.0' // æ ‡è®°æ•°æ®ç‰ˆæœ¬
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `ç‚’èœå¹³å°æ•°æ®å¤‡ä»½_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('æ•°æ®å¤‡ä»½å·²ä¸‹è½½', 'success');
            console.log('âœ… å¤‡ä»½æ•°æ®å¯¼å‡ºæˆåŠŸï¼Œä½¿ç”¨UserPreferencesç³»ç»Ÿ');
        }

        function importAllData() {
            document.getElementById('backupFileInput').click();
        }

        function clearLearningHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å­¦ä¹ è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('learning_history');
                showToast('å­¦ä¹ è®°å½•å·²æ¸…ç©º', 'info');
                window.userCenterPage.updateAllStats();
                window.userCenterPage.renderContent();
            }
        }

        function clearAllData() {
            if (confirm('âš ï¸ è­¦å‘Šï¼šæ­¤æ“ä½œå°†æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼ˆæ”¶è—ã€å­¦ä¹ è®°å½•ã€ä¸ªäººè®¾ç½®ç­‰ï¼‰ï¼Œä¸”ä¸å¯æ¢å¤ï¼\n\nç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                localStorage.clear();
                showToast('æ‰€æœ‰æ•°æ®å·²æ¸…ç©ºï¼Œå³å°†é‡æ–°åŠ è½½é¡µé¢...', 'info');
                setTimeout(() => {
                    location.reload();
                }, 2000);
            }
        }

        // åˆ·æ–°ä¸ªäººä¿¡æ¯æ˜¾ç¤º
        function refreshProfile() {
            if (window.userCenterPage) {
                window.userCenterPage.loadUserInfo();
                window.userCenterPage.updateAllStats();
                showToast('ä¸ªäººä¿¡æ¯å·²åˆ·æ–°', 'success');
            }
        }

        function changePassword() {
            const newPassword = prompt('è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½å­—ç¬¦ï¼‰:');
            if (newPassword && newPassword.length >= 6) {
                localStorage.setItem('userPassword', newPassword);
                showToast('å¯†ç ä¿®æ”¹æˆåŠŸ', 'success');
            } else if (newPassword) {
                showToast('å¯†ç é•¿åº¦è‡³å°‘éœ€è¦6ä½å­—ç¬¦', 'error');
            }
        }

        function openFullLearningHistory() {
            window.location.href = 'learning-history.html';
        }

        // æœ¬å‘¨è®¡åˆ’åŠŸèƒ½
        function setWeeklyGoal() {
            const currentGoal = localStorage.getItem('weeklyGoal');
            const goalText = prompt('è¯·è®¾ç½®æœ¬å‘¨å­¦ä¹ ç›®æ ‡:', currentGoal || 'æ¯å¤©å­¦ä¹ ä¸€é“æ–°èœè°±');
            
            if (goalText && goalText.trim()) {
                const goalData = {
                    description: goalText.trim(),
                    targetDays: parseInt(prompt('ç›®æ ‡å­¦ä¹ å¤©æ•° (1-7):', '5')) || 5,
                    setDate: new Date().toISOString(),
                    weekStart: getWeekStart().toISOString()
                };
                
                localStorage.setItem('weeklyGoal', JSON.stringify(goalData));
                showToast('æœ¬å‘¨ç›®æ ‡è®¾å®šæˆåŠŸï¼', 'success');
                
                // æ›´æ–°æ˜¾ç¤º
                updateWeeklyGoalDisplay();
                window.userCenterPage.renderWeeklyPlan();
            }
        }
        
        function editWeeklyPlan() {
            const plans = JSON.parse(localStorage.getItem('dailyPlans') || '{}');
            const today = new Date().toISOString().split('T')[0];
            
            const planText = prompt('è¯·è¾“å…¥ä»Šå¤©çš„å­¦ä¹ è®¡åˆ’:', plans[today] || '');
            
            if (planText !== null) { // å…è®¸ç©ºå­—ç¬¦ä¸²ï¼ˆæ¸…é™¤è®¡åˆ’ï¼‰
                if (planText.trim()) {
                    plans[today] = planText.trim();
                    showToast('ä»Šæ—¥è®¡åˆ’å·²æ›´æ–°', 'success');
                } else {
                    delete plans[today];
                    showToast('ä»Šæ—¥è®¡åˆ’å·²æ¸…é™¤', 'info');
                }
                
                localStorage.setItem('dailyPlans', JSON.stringify(plans));
                
                // æ›´æ–°æ˜¾ç¤º
                updatePlanSuggestions();
            }
        }
        
        // æ›´æ–°æœ¬å‘¨ç›®æ ‡æ˜¾ç¤º
        function updateWeeklyGoalDisplay() {
            const goalContainer = document.getElementById('currentGoal');
            const goalDescription = document.getElementById('goalDescription');
            const goalProgress = document.getElementById('goalProgress');
            const weeklyGoalProgress = document.getElementById('weeklyGoalProgress');
            
            const goalData = JSON.parse(localStorage.getItem('weeklyGoal') || 'null');
            
            if (goalData && goalContainer && goalDescription && goalProgress) {
                goalContainer.style.display = 'block';
                goalDescription.textContent = goalData.description;
                
                // è®¡ç®—å®Œæˆè¿›åº¦
                const completedDays = document.getElementById('completedDaysCount')?.textContent || '0';
                const progress = Math.round((parseInt(completedDays) / goalData.targetDays) * 100);
                
                goalProgress.textContent = `${completedDays}/${goalData.targetDays}`;
                if (weeklyGoalProgress) {
                    weeklyGoalProgress.textContent = `${progress}%`;
                }
            } else if (goalContainer) {
                goalContainer.style.display = 'none';
                if (weeklyGoalProgress) {
                    weeklyGoalProgress.textContent = 'æœªè®¾å®š';
                }
            }
        }
        
        // æ›´æ–°è®¡åˆ’å»ºè®®
        function updatePlanSuggestions() {
            const container = document.getElementById('planSuggestions');
            if (!container) return;
            
            const plans = JSON.parse(localStorage.getItem('dailyPlans') || '{}');
            const today = new Date().toISOString().split('T')[0];
            const todayPlan = plans[today];
            
            let suggestionsHTML = '<h3 style="margin-bottom: 20px; font-size: 1.2rem; color: #333;">ğŸ’¡ å­¦ä¹ å»ºè®®</h3>';
            
            if (todayPlan) {
                suggestionsHTML += `
                    <div class="today-plan" style="
                        background: #e3f2fd;
                        border-left: 4px solid #2196f3;
                        padding: 15px;
                        border-radius: 6px;
                        margin-bottom: 20px;
                    ">
                        <h4 style="margin: 0 0 8px 0; color: #1976d2;">ğŸ“ ä»Šæ—¥è®¡åˆ’</h4>
                        <p style="margin: 0; color: #1976d2;">${todayPlan}</p>
                    </div>
                `;
            }
            
            // æ·»åŠ æ¨èèœè°±
            const recommendations = getWeeklyRecommendations();
            if (recommendations.length > 0) {
                suggestionsHTML += `
                    <div class="recipe-recommendations">
                        <h4 style="margin: 15px 0; color: #333;">ğŸ³ æ¨èå­¦ä¹ èœè°±</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            ${recommendations.map(recipe => `
                                <div class="mini-recipe-card" style="
                                    background: white;
                                    border: 1px solid #e9ecef;
                                    border-radius: 8px;
                                    padding: 15px;
                                    text-align: center;
                                ">
                                    <div style="font-size: 1.5rem; margin-bottom: 8px;">${getCuisineIcon(recipe.cuisine)}</div>
                                    <h5 style="margin: 0 0 5px 0; font-size: 0.9rem;">${recipe.title}</h5>
                                    <div style="font-size: 0.8rem; color: #666; margin-bottom: 10px;">${recipe.cookTime}</div>
                                    <button class="data-btn data-btn--primary" onclick="window.location.href='../recipes/detail.html?id=${recipe.id}'" style="font-size: 0.8rem; padding: 6px 12px;">
                                        å¼€å§‹å­¦ä¹ 
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = suggestionsHTML;
        }
        
        // è·å–æœ¬å‘¨æ¨èèœè°±
        function getWeeklyRecommendations() {
            if (!window.RecipeData || !window.RecipeData.recipes) return [];
            
            const history = JSON.parse(localStorage.getItem('learning_history') || '[]');
            const learnedIds = new Set(history.map(h => h.recipeId));
            
            // æ¨èæœªå­¦è¿‡çš„ç®€å•èœè°±
            const unlearned = window.RecipeData.recipes.filter(recipe => 
                !learnedIds.has(recipe.id) && 
                recipe.difficulty === 'easy'
            );
            
            // éšæœºé€‰æ‹©3é“
            const shuffled = unlearned.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 3);
        }
        
        // è·å–èœç³»å›¾æ ‡
        function getCuisineIcon(cuisine) {
            const icons = {
                'sichuan': 'ğŸŒ¶ï¸',
                'cantonese': 'ğŸ¦', 
                'hunan': 'ğŸ”¥',
                'shandong': 'ğŸŸ'
            };
            return icons[cuisine] || 'ğŸ½ï¸';
        }
        
        // è·å–æœ¬å‘¨å¼€å§‹æ—¥æœŸ
        function getWeekStart() {
            const now = new Date();
            const monday = new Date(now.setDate(now.getDate() - now.getDay() + 1));
            monday.setHours(0, 0, 0, 0);
            return monday;
        }

        function submitFeedback() {
            const feedback = document.getElementById('feedbackText').value.trim();
            if (feedback) {
                // ä¿å­˜åé¦ˆåˆ°localStorageï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥å‘é€åˆ°æœåŠ¡å™¨ï¼‰
                const feedbacks = JSON.parse(localStorage.getItem('user_feedbacks') || '[]');
                feedbacks.push({
                    content: feedback,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('user_feedbacks', JSON.stringify(feedbacks));
                
                document.getElementById('feedbackText').value = '';
                showToast('æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šè®¤çœŸè€ƒè™‘æ‚¨çš„å»ºè®®', 'success');
            } else {
                showToast('è¯·å¡«å†™åé¦ˆå†…å®¹', 'error');
            }
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${type === 'success' ? '#4caf50' : type === 'error' ? '#f44336' : '#2196f3'};
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                font-size: 14px;
                font-weight: 500;
                opacity: 0;
                transform: translateX(100px);
                transition: all 0.3s ease;
            `;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.transform = 'translateX(0)';
            }, 10);

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100px)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            window.userCenterPage = new UserCenterPage();
            
            // éªŒè¯æ”¶è—ç³»ç»ŸåŒæ­¥
            setTimeout(() => {
                testFavoriteSystemSync();
            }, 1000);
            
            // äºŒæ­¥éªŒè¯å¼€å…³
            const twoFactorToggle = document.getElementById('twoFactorToggle');
            if (twoFactorToggle) {
                const saved = localStorage.getItem('twoFactorEnabled');
                twoFactorToggle.checked = saved === 'true';
                
                twoFactorToggle.addEventListener('change', function() {
                    localStorage.setItem('twoFactorEnabled', this.checked);
                    showToast(this.checked ? 'äºŒæ­¥éªŒè¯å·²å¯ç”¨' : 'äºŒæ­¥éªŒè¯å·²å…³é—­', 'info');
                });
            }
            
            // ç›‘å¬ä¸ªäººèµ„æ–™æ›´æ–°äº‹ä»¶
            window.addEventListener('profileUpdated', (e) => {
                console.log('æ”¶åˆ°ä¸ªäººèµ„æ–™æ›´æ–°äº‹ä»¶', e.detail);
                // åˆ·æ–°æ˜¾ç¤º
                if (window.userCenterPage) {
                    window.userCenterPage.loadUserInfo();
                }
                showToast('ä¸ªäººèµ„æ–™å·²åŒæ­¥æ›´æ–°', 'success');
            });
        });
        
        // æµ‹è¯•æ”¶è—ç³»ç»ŸåŒæ­¥
        function testFavoriteSystemSync() {
            if (window.UserPreferences) {
                const favorites = window.UserPreferences.getFavorites();
                console.log('âœ… æ”¶è—ç³»ç»ŸåŒæ­¥æµ‹è¯•é€šè¿‡');
                console.log('å½“å‰æ”¶è—æ•°é‡:', favorites.length);
                console.log('æ”¶è—ç³»ç»Ÿä½¿ç”¨çš„å­˜å‚¨é”®:', 'cooking_favorites');
                console.log('æ”¶è—åˆ—è¡¨é¢„è§ˆ:', favorites.slice(0, 5));
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ—§æ•°æ®éœ€è¦è¿ç§»
                const oldFavorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                if (oldFavorites.length > 0 && favorites.length === 0) {
                    console.log('âš ï¸ å‘ç°æ—§æ”¶è—æ•°æ®ï¼Œå»ºè®®è¿ç§»');
                    if (confirm('æ£€æµ‹åˆ°æ—§ç‰ˆæ”¶è—æ•°æ®ï¼Œæ˜¯å¦è¿ç§»åˆ°æ–°ç³»ç»Ÿï¼Ÿ')) {
                        oldFavorites.forEach(recipeId => {
                            window.UserPreferences.addFavorite(recipeId);
                        });
                        localStorage.removeItem('favorites'); // æ¸…é™¤æ—§æ•°æ®
                        showToast(`å·²è¿ç§» ${oldFavorites.length} ä¸ªæ”¶è—åˆ°æ–°ç³»ç»Ÿ`, 'success');
                        window.userCenterPage.updateAllStats();
                    }
                }
            } else {
                console.error('âŒ UserPreferences ç³»ç»ŸæœªåŠ è½½');
            }
        }
    </script>
</body>
</html>